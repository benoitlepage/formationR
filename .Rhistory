cbind(var = rep("sexL", 2),
meta_df_1[meta_df_1$var == "sex", 2:5]))
meta_df_1 <- rbind(meta_df_1,
cbind(var = rep("traitL", 3),
meta_df_1[meta_df_1$var == "sex", 2:5]))
rm(list=ls())
## Importer la base df_1 et les méta-données
df_1 <- read.csv2("data/df_1.csv")
meta_df_1 <- read.csv2("data/meta_df_1.csv")
## créer les facteurs traitement et sex
df_1 <- within(df_1, {
sexL <- factor(sex,
labels = meta_df_1$labs[meta_df_1$var == "sex"])
traitL <- factor(trait,
labels = meta_df_1$labs[meta_df_1$var == "trait"])
})
## On met à jour la base de méta-données pour ces deux nouvelles variables
# (on garde les mêmes label, id_labs, cod_labs et labs que pour les variables
#  originales)
meta_df_1 <- rbind(meta_df_1,
cbind(var = rep("sexL", 2),
meta_df_1[meta_df_1$var == "sex", 2:5]))
meta_df_1 <- rbind(meta_df_1,
cbind(var = rep("traitL", 3),
meta_df_1[meta_df_1$var == "trait", 2:5]))
meta_df_1
df_1$traitL |> table()
df_1$traitL |>
table() |>
prop.table() |>
round(digits = 1)
meta_df_1$label
meta_df_1$var
meta_df_1$var == "sexL"
meta_df_1$label[meta_df_1$var == "sexL"]
data.frame(var_name = meta_df_1$label[meta_df_1$var == "sexL"],
levels = df_1$sexL |>
table() |>
names(),
n = df_1$sexL |>
table() |>
as.integer(),
p = df_1$sexL |>
table() |>
prop.table() |>
round(digits = 1) |>
as.double()
)
data.frame(var_name = meta_df_1$label[meta_df_1$var == "sexL"],
levels = df_1$sexL |>
table() |>
names(),
n = df_1$sexL |>
table() |>
as.integer(),
p = df_1$sexL |>
table() |>
prop.table() * 100 |>
round(digits = 1) |>
as.double()
)
data.frame(var_name = meta_df_1$label[meta_df_1$var == "sexL"],
levels = df_1$sexL |>
table() |>
names(),
n = df_1$sexL |>
table() |>
as.integer(),
p = df_1$sexL |>
table() |>
prop.table() * 100 |>
# round(digits = 1) |>
as.double()
)
rbind(table,
data.frame(var_names = meta_df_1$label[meta_df_1$var == "traitL"],
levels = df_1$traitL |>
table() |>
names(),
n = df_1$traitL |>
table() |>
as.integer(),
p = df_1$traitL |>
table() |>
prop.table() |>
round(digits = 1) |>
as.double()
))
meta_df_1$label[meta_df_1$var == "traitL"]
table
table <- data.frame(var_name = meta_df_1$label[meta_df_1$var == "sexL"],
levels = df_1$sexL |>
table() |>
names(),
n = df_1$sexL |>
table() |>
as.integer(),
p = df_1$sexL |>
table() |>
prop.table() * 100 |>
round(digits = 1) |>
as.double()
)
table
rm(table)
tb1 <- data.frame(var_name = meta_df_1$label[meta_df_1$var == "sexL"],
levels = df_1$sexL |>
table() |>
names(),
n = df_1$sexL |>
table() |>
as.integer(),
p = df_1$sexL |>
table() |>
prop.table() * 100 |>
round(digits = 1) |>
as.double()
)
data.frame(var_names = meta_df_1$label[meta_df_1$var == "traitL"],
levels = df_1$traitL |>
table() |>
names(),
n = df_1$traitL |>
table() |>
as.integer(),
p = df_1$traitL |>
table() |>
prop.table() * 100 |>
round(digits = 1) |>
as.double()
)
data.frame(var_name = meta_df_1$label[meta_df_1$var == "sexL"],
levels = df_1$sexL |>
table() |>
names(),
n = df_1$sexL |>
table() |>
as.integer(),
p = df_1$sexL |>
table() |>
prop.table() * 100 |>
as.double() |>
round(digits = 1)
)
tb1 <- data.frame(var_name = meta_df_1$label[meta_df_1$var == "sexL"],
levels = df_1$sexL |>
table() |>
names(),
n = df_1$sexL |>
table() |>
as.integer(),
p = df_1$sexL |>
table() |>
prop.table() * 100 |>
as.double() |>
round(digits = 1)
)
data.frame(var_name = meta_df_1$label[meta_df_1$var == "sexL"],
levels = df_1$sexL |>
table() |>
names(),
n = df_1$sexL |>
table() |>
as.integer(),
p = df_1$sexL |>
table() |>
prop.table() |>
as.double() * 100 |>
round(digits = 1)
)
tb1 <- data.frame(var_name = meta_df_1$label[meta_df_1$var == "sexL"],
levels = df_1$sexL |>
table() |>
names(),
n = df_1$sexL |>
table() |>
as.integer(),
p = df_1$sexL |>
table() |>
prop.table() |>
as.double() * 100 |>
round(digits = 1)
)
rbind(tb1,
data.frame(var_names = meta_df_1$label[meta_df_1$var == "traitL"],
levels = df_1$traitL |>
table() |>
names(),
n = df_1$traitL |>
table() |>
as.integer(),
p = df_1$traitL |>
table() |>
prop.table() |>
as.double() * 100 |> # supprime les attributs "names()"
round(digits = 1)
))
tb1 <- data.frame(var_name = meta_df_1$label[meta_df_1$var == "sexL"],
levels = df_1$sexL |>
table() |>
names(),
n = df_1$sexL |>
table() |>
as.integer(), # supprime les attributs "names()" du vecteur
p = df_1$sexL |>
table() |>
prop.table() |>
as.double() * 100 |> # supprime les attributs "names()"
round(digits = 1)
)
tb1
data.frame(var_names = meta_df_1$label[meta_df_1$var == "traitL"],
levels = df_1$traitL |>
table() |>
names(),
n = df_1$traitL |>
table() |>
as.integer(),
p = df_1$traitL |>
table() |>
prop.table() |>
as.double() * 100 |> # supprime les attributs "names()"
round(digits = 1)
)
rbind(tb1,
data.frame(var_names = meta_df_1$label[meta_df_1$var == "traitL"],
levels = df_1$traitL |>
table() |>
names(),
n = df_1$traitL |>
table() |>
as.integer(),
p = df_1$traitL |>
table() |>
prop.table() |>
as.double() * 100 |> # supprime les attributs "names()"
round(digits = 1)
))
rbind(tb1,
data.frame(var_name = meta_df_1$label[meta_df_1$var == "traitL"],
levels = df_1$traitL |>
table() |>
names(),
n = df_1$traitL |>
table() |>
as.integer(),
p = df_1$traitL |>
table() |>
prop.table() |>
as.double() * 100 |> # supprime les attributs "names()"
round(digits = 1)
))
tb1 <- rbind(tb1,
data.frame(var_name = meta_df_1$label[meta_df_1$var == "traitL"],
levels = df_1$traitL |>
table() |>
names(),
n = df_1$traitL |>
table() |>
as.integer(),
p = df_1$traitL |>
table() |>
prop.table() |>
as.double() * 100 |> # supprime les attributs "names()"
round(digits = 1)
))
t1 <- gt(tb1)
t1
t1 <- gt(t1,
groupname_col = "var_name",
rowname_col = "levels")
gt(t1,
rowname_col = "levels",
)
t1
gt(tb1,
rowname_col = "levels",
)
t1
tb1
gt(tb1,
rowname_col = "levels",
groupname_col = "var_name")
t1 <- gt(tb1,
rowname_col = "levels",
groupname_col = "var_name")
t1 <- t1 |>
tab_stubhead(label = "Variables")
t1 <- t1 |>
cols_label(n = "N", # change les noms de colonnes
p = "%")
t1
tb1
data.frame(var_name = meta_df_1$label[meta_df_1$var == "traitL"],
levels = df_1$traitL |>
table() |>
names(),
n = df_1$traitL |>
table() |>
as.integer(),
p = df_1$traitL |>
table() |>
prop.table() |>
as.double() * 100 |> # supprime les attributs "names()"
round(digits = 1)
)
data.frame(var_name = meta_df_1$label[meta_df_1$var == "traitL"],
levels = df_1$traitL |>
table() |>
names(),
n = df_1$traitL |>
table() |>
as.integer(),
p = df_1$traitL |>
table() |>
prop.table() |>
as.double() * 100 |> # supprime les attributs "names()"
round(digits = 2)
)
tb1 <- data.frame(var_name = meta_df_1$label[meta_df_1$var == "sexL"],
levels = df_1$sexL |>
table() |>
names(),
n = df_1$sexL |>
table() |>
as.integer(), # supprime les attributs "names()" du vecteur
p = df_1$sexL |>
table() |>
prop.table() |>
as.double() * 100 # supprime les attributs "names()"
)
# Ajouter au dessous la table décrivant le traitement
tb1 <- rbind(tb1,
data.frame(var_name = meta_df_1$label[meta_df_1$var == "traitL"],
levels = df_1$traitL |>
table() |>
names(),
n = df_1$traitL |>
table() |>
as.integer(),
p = df_1$traitL |>
table() |>
prop.table() |>
as.double() * 100  # supprime les attributs "names()"
))
tb1
with(tb1, round(p, digits = 1))
tb1$p <- with(tb1, round(p, digits = 1))
tb1
t1 <- gt(tb1)
t1
t1 <- gt(tb1,
rowname_col = "levels",
groupname_col = "var_name")
t1
dim(t1)
class(t1)
t1 <- gt(tb1)
t1
class(t1)
is.tibble(t1)
tibble::is_tibble(t1)
class(t1)
t1$`_data`
t1$`_boxhead`
t1$`_heading`$title
t1 <- t1 |>
tab_stubhead(label = "Variables")
t1
t1 <- gt(tb1)
t1
class(t1)
t1$`_data` # données initiales
t1$`_heading`$title
t1 <- gt(tb1,
rowname_col = "levels",
groupname_col = "var_name")
t1
t1$`_heading`
t1$`_boxhead`
t1$`_formats`
tb1 <- rbind(tb_sex, tb_trait)
tb_sex <- data.frame(var_name = meta_df_1$label[meta_df_1$var == "sexL"],
levels = df_1$sexL |>
table() |>
names(),
n = df_1$sexL |>
table() |>
as.integer(), # supprime les attributs "names()" du vecteur
p = df_1$sexL |>
table() |>
prop.table() |>
as.double() * 100) # supprime les attributs "names()"
# Ajouter au dessous la table décrivant le traitement
tb_trait <- data.frame(var_name = meta_df_1$label[meta_df_1$var == "traitL"],
levels = df_1$traitL |>
table() |>
names(),
n = df_1$traitL |>
table() |>
as.integer(),
p = df_1$traitL |>
table() |>
prop.table() |>
as.double() * 100)  # supprime les attributs "names()"
tb1 <- rbind(tb_sex, tb_trait)
tb1$p <- with(tb1, round(p, digits = 1))
tb1
t1 <- gt(tb1)
t1
class(t1)
t1$`_data` # données initiales
t1$`_heading`$title
t1 <- gt(tb1,
rowname_col = "levels",
groupname_col = "var_name")
t1
t1 <- t1 |>
tab_stubhead(label = "Variables")
t1
t1 <- t1 |>
cols_label(n = "N", # change les noms de colonnes
p = "%")
t1
?dplyr::group_vars
dplyr::group_vars(tb1)
t1 <- t1 |>
tab_header(
title = "Indiquer votre titre ici",
subtitle = md("Exemple de texte markdown _en italique_ ou **en gras** et des formulaes $\frac{\pi}{2 \times (\sqrt{12})}$")
t1 |>
tab_header(
title = "Indiquer votre titre ici",
subtitle = md("Texte en **gras**")
)
t1 |>
tab_header(
title = "Indiquer votre titre ici",
subtitle = md("Texte en **gras** ou en *italique*")
)
tab_header(
title = "Indiquer votre titre ici",
subtitle = md("Texte en **gras** ou en *italique* et une formule")
)
tab_header(
title = "Indiquer votre titre ici",
subtitle = md("Texte en **gras** ou en *italique* et une formule")
)
t1 |>
tab_header(
title = "Indiquer votre titre ici",
subtitle = md("Texte en **gras** ou en *italique* et une formule")
)
t1 |>
tab_header(
title = "Indiquer votre titre ici",
subtitle = md("Texte en **gras** ou en *italique* et une formule $x$")
)
t1 |>
tab_header(
title = "Indiquer votre titre ici",
subtitle = md("Texte en **gras** ou en *italique* et une formule $\frac{x}{\sqrt{y}}$")
t1 |>
tab_header(
title = "Indiquer votre titre ici",
subtitle = md("Texte en **gras** ou en *italique* et une formule $$\frac{x}{\sqrt{y}}$$")
t1 |>
tab_header(
title = "Indiquer votre titre ici",
subtitle = md("Texte en **gras** ou en *italique* et une formule $x + \sqrt{y}$")
t1 |>
tab_header(
title = "Indiquer votre titre ici",
subtitle = md("Texte en **gras** ou en *italique*")
)
t1 |>
tab_header(
title = "Indiquer votre titre ici",
subtitle = md("Texte en **gras** ou en *italique* $\Delta$")
t1 |>
tab_header(
title = "Indiquer votre titre ici",
subtitle = md("Texte en **gras** ou en *italique* $$\Delta$$")
t1 |>
tab_header(
title = "Indiquer votre titre ici",
subtitle = md("Texte en **gras** ou en *italique* $\Delta$")
library(tidyverse)
library(gt)
?summary_rows
devtools::install_github("BS1125/CMAverse")
devtools::install_github("BS1125/CMAverse")
Sys.getenv("GITHUB_PAT")
Sys.unsetenv("GITHUB_PAT")
devtools::install_github("BS1125/CMAverse")
devtools::install_github("BS1125/CMAverse")
gitcreds::gitcreds_set()
devtools::install_github("BS1125/CMAverse")
library(CMAverse)
?cmaverse
??cmaverse
?CMAverse
??CMAversee
??CMAverse
usethis::gh_token_help()
usethis::edit_r_environ()
usethis::gh_token_help()
usethis::edit_r_environ()
usethis::edit_r_environ()
usethis::gh_token_help()
usethis::edit_r_environ()
gitcreds::gitcreds_set()
